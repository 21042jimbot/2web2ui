import { Meta, Story, Preview, Props } from '@storybook/addon-docs/blocks';
import MultiEmailField from './MultiEmailField.js';
import useMultiEmailField from './useMultiEmailField.js';

<Meta title="Form Controls|MultiEmailField" component={MultiEmailField}/>

# MultiEmailField

Use the `<MultiEmailField/>` component to allow the user to enter (and submit) multiple email addresses in to a single text field.

Typically, this component is used in conjunction with the `useMultiEmail` custom hook.

## Props

<Props of={MultiEmailField}/>

## Examples

### Default

<Preview>
  <Story name="default">
    <MultiEmailField
      id="multi-email-email-to"
      label="To:"
      name="emailTo"
      onChange={() => console.log('change!')}
      onKeyDownAndBlur={() => console.log('keyDown or blur!')}
      onRemoveEmail={() => console.log('remove!')}
      value={'hello@me.com'}
    />
  </Story>
</Preview>

### With an Error

<Preview>
  <Story name="with an error">
    <MultiEmailField
      id="multi-email-email-to-with-an-error"
      label="To:"
      name="emailTo"
      onChange={() => console.log('change!')}
      onKeyDownAndBlur={() => console.log('keyDown or blur!')}
      onRemoveEmail={() => console.log('remove!')}
      value={'hello@me.com'}
      error="This instance has an error"
    />
  </Story>
</Preview>

### With Email Addresses Entered

<Preview>
  <Story name="with email addresses entered">
    <MultiEmailField
      id="multi-email-email-to-with-email-addresses-entered"
      label="To:"
      name="emailTo"
      onChange={() => console.log('change!')}
      onKeyDownAndBlur={() => console.log('keyDown or blur!')}
      onRemoveEmail={() => console.log('remove!')}
      value={'hello@me.com'}
      emailList={[
        { email: 'hello@you.com' },
        { email: 'hello@gmail.com'}
      ]}
    />
  </Story>
</Preview>

## Usage

```js
import React from 'react';
import MultiEmailField, { useMultiEmailField } from 'src/components/multiEmailField';

const MyComponent = () => {
  const {
    handleMultiEmailChange,
    handleMultiEmailKeyDownAndBlur,
    handleMultiEmailRemove,
    setMultiEmailError,
    setMultiEmailValue,
    setMultiEmailList,
    multiEmailValue,
    multiEmailList,
    multiEmailError
  } = useMultiEmailField();

  return (
    <form>
      <MultiEmailField
        id="multi-email-email-to"
        label="To:"
        name="emailTo"
        onChange={(e) => handleMultiEmailChange(e)}
        onKeyDownAndBlur={(e) => handleMultiEmailKeyDownAndBlur(e)}
        onRemoveEmail={handleMultiEmailRemove}
        error={multiEmailError}
        value={multiEmailValue}
        emailList={multiEmailList}
      />

      <button onClick={() => setMultiEmailValue('')}>Clear Value</button>

      <button onClick={() => setMultiEmailList([])}>Clear List</button>

      <button onClick={() => setMultiEmailError('')}>Clear Error</button>
    </form>
  );
};
```
